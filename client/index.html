<canvas id="ctx" width="500" height="500" style="border: 1px solid black">

  
</canvas>


<button onclick="happy()">HAPPY</button>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script> -->
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

<script>
  var ctx = document.getElementById('ctx').getContext('2d')
  ctx.font = '30px Arial'

  var socket = io()

  socket.on('newPosition', function (data) {
    ctx.clearRect(0, 0, 500, 500)
    for (var i = 0; i < data.length; i++) {
      ctx.fillText(data[i].number, data[i].x, data[i].y)
    }

  })

  document.onkeydown = function (e) {
    if (e.keyCode === 68) // d
      socket.emit('keyPress', {
        inputId: 'right',
        state: true
      })
    else if (e.keyCode === 83) // s
      socket.emit('keyPress', {
        inputId: 'down',
        state: true
      })
    else if (e.keyCode === 65) // a
      socket.emit('keyPress', {
        inputId: 'left',
        state: true
      })
    else if (e.keyCode === 87) // w
      socket.emit('keyPress', {
        inputId: 'up',
        state: true
      })
  }

  document.onkeyup = function (e) {
    if (e.keyCode === 68) // d
      socket.emit('keyPress', {
        inputId: 'right',
        state: false
      })
    else if (e.keyCode === 83) // s
      socket.emit('keyPress', {
        inputId: 'down',
        state: false
      })
    else if (e.keyCode === 65) // a
      socket.emit('keyPress', {
        inputId: 'left',
        state: false
      })
    else if (e.keyCode === 87) // w
      socket.emit('keyPress', {
        inputId: 'up',
        state: false
      })
  }
</script>