<html>

<head>
  <title>แบบทดสอบก่อนการเล่นเกม</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id"
    content="157998624916-18nnavq8irs8kie1au0b6epfnt662h1s.apps.googleusercontent.com">
  <!-- <script type="text/javascript" src="client/js/phaser.js"></script>
  <script type="text/javascript" src="client/js/main.js"></script> -->
</head>

<body>

  <span id="navBar"></span>


  <div style="padding: 25px;">
    <div class="container border border-primary rounded">
      <div style="margin: 40px">
        <div class="row">
          <div class="col-2">
            <span id="picture">
          </div>
          <div style="padding-left:10px">
            <span id="name"></span>
            <span id="email"></span>
            <span id="preTest"></span>
            <span id="postTest"></span>
          </div>
        </div>
        <a class="btn btn-danger btn-lg " href="#" onclick="signOut();" style="margin-left:auto;margin-right:auto">Sign
          out</a>
      </div>
    </div>
  </div>
  <div style="display: none" class="g-signin2" data-onsuccess="onSignIn">


    <script>
      $(document).ready(function () {
        $("#navBar").load("client/navbar.html");

        var data = $.ajax({
          url: '/refreshUser',
          type: "GET",
          async: false,
        }).responseText

        if (data) {
          var userJson = JSON.parse(data);

          // $("#picture").html("<img src='" + userJson.imgURL + "' />")
          $("#name").html("<h4>Name: " + userJson.name + "</h4>")
          $("#email").html("<h4>Email: " + userJson.email + "</h4>")
          $("#preTest").html("<h4>Pre-Test Score: " + userJson.pre + "</h4>")
          $("#postTest").html("<h4>Post-Test Score: " + userJson.post + "</h4>")
          $("#picture").html("<img src='" + userJson.imgURL + "' class='rounded-circle' width='120px' style='margin-left:auto;margin-right:auto'>")
        } else {
          $("#listProfile").hide()
        }

      })

      function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
        // document.getElementById("test").innerHTML = profile.getName()
      }

      function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
          alert("log out")
          window.location.href = "/signout";
        });
      }
    </script>
</body>

</html>